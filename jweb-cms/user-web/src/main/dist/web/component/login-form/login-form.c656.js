!function(i,n){$.prototype.invalid=function(i){var n=$(this).find("[name='"+i+"']");n.addClass("error"),n.change(function(){n.removeClass("error"),n.off("change")})},$.prototype.invalidText=function(i){if(!i)return void $(".form-validation").remove();var n=$("<div class='form-validation form-validation--error'><i class='fa fa-exclamation-circle'></i><span class='form-validation__text'>"+i+"</span></div>");$(this).prepend(n)};var t={submitBtn:$("#submit"),form:$("#user-login-form"),init:function(){this.initEvent()},initEvent:function(){this.submitBtn.click(function(){for(var i=this.form.serializeArray(),n={},o=0;o<i.length;o+=1){var a=i[o];n[a.name]=a.value}t.submit(n)}.bind(this))},submit:function(n){t.form.invalidText(),$.ajax({url:"/web/api/user/login",method:"POST",data:JSON.stringify(n),contentType:"application/json",dataType:"json"}).then(function(n){i.location.href=n.fromURL?n.fromURL:"/"}).fail(function(i){t.form.invalid(i.responseJSON.field),t.form.invalidText(i.responseJSON.message)})}};t.init()}(this,this.document);
!function(t,i){$.prototype.invalid=function(t){var i=$(this).find("[name='"+t+"']");i.addClass("error"),i.change(function(){i.removeClass("error"),i.off("change")})};var n={form:$("#user-forget-password-form"),submitBtn:$(".btn-submit"),init:function(){this.initEvent()},initEvent:function(){this.submitBtn.click(function(){for(var t=this.form.serializeArray(),i={},a=0;a<t.length;a+=1){var e=t[a];i[e.name]=e.value}if(!n.validate(i))return!1;n.submit(i)}.bind(this))},validate:function(t){var i=$("#userNameStrategy").val();return"EMAIL"===i?this.validateEmail(t.username):"PHONE"!==i||this.validatePhone(t.username)},validatePhone:function(t){var i=/^1[3578]\d{9}$/.test(t);return i||this.form.invalid("username"),i},validateEmail:function(t){var i=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t);return i||this.form.invalid("username"),i},submit:function(i){$.ajax({url:"/web/api/user/reset-password",method:"POST",data:JSON.stringify(i),contentType:"application/json",dataType:"json"}).done(function(){t.location.href="/password/forget/sent"}).fail(function(t){n.form.invalid(t.responseJSON.field)})}};n.init()}(this,this.document);